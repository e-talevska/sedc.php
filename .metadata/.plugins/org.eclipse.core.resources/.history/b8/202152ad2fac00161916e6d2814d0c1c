<?php
namespace blog;
ini_set("display_errors", "On");
define("DB_HOST", "localhost");
define("DB_USER", "admin");
define("DB_PASS", "password");
define("DB_NAME", "blog");

class MySQL {
	private $mysql;
	function __construct() {
		$this->mysql = new \mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME);
		if($this->mysql->connect_errno) {
			throw new \Exception($this->mysql->connect_error);
		}
	}
	
	function read($table) {
		$query = "SELECT * FROM $table";
		$result = $this->mysql->query($query);
		
		if($result == FALSE) {
			var_dump($this->mysql->error);
			return NULL;
		}
		
		$return = [];
		while($row = $result->fetch_assoc()) {
			$return[] = $row;
		}
		
		$result->free_result();
		return $return;
	}
	
	public function __destruct() {
		$this->mysql->close();
	}
	
	public function insertMenuItem($name, $position, $visible) {
		$query = "INSERT INTO menu_items (name, position, visible) VALUES ('$name', $position, $visible);";
		$result = $this->mysql->query($query);
	}
}
